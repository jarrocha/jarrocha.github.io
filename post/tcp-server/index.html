<!DOCTYPE html>
<html lang="en-us">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    
    <meta property="og:site_name" content="Innercoder.dev">
    <meta property="og:type" content="article">

    
    <meta property="og:image" content="https://jarrocha.github.io/img/backgrounds/tech18.jpg">
    <meta property="twitter:image" content="https://jarrocha.github.io/img/backgrounds/tech18.jpg" />
    

    
    <meta name="title" content="TCP Sockets Server" />
    <meta property="og:title" content="TCP Sockets Server" />
    <meta property="twitter:title" content="TCP Sockets Server" />
    

    
    <meta name="description" content="Basics of a TCP socket server">
    <meta property="og:description" content="Basics of a TCP socket server" />
    <meta property="twitter:description" content="Basics of a TCP socket server" />
    

    
    <meta property="twitter:card" content="summary" />
    
    

    <meta name="keyword"  content="Linux, C, C&#43;&#43;, macOS, mbedOS">
    <link rel="shortcut icon" href="/img/favicon.ico">

    <title>TCP Sockets Server-Innercoder.dev</title>

    <link rel="canonical" href="/post/tcp-server/">

    <link rel="stylesheet" href="/css/iDisqus.min.css"/>
	
    
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    
    <link rel="stylesheet" href="/css/hux-blog.min.css">

    
    <link rel="stylesheet" href="/css/zanshang.css">
    
    
    <link href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    
    

    
    
    <script src="/js/jquery.min.js"></script>
    
    
    <script src="/js/bootstrap.min.js"></script>
    
    
    <script src="/js/hux-blog.min.js"></script>

    
    

</head>



<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Innercoder.dev</a>
        </div>

        
        
        <div id="huxblog_navbar">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="/">Home</a>
                    </li>
                    
                        
                    
                    
		    
                        <li><a href="/top/upcoming/">UPCOMING</a></li>
                    
                        <li><a href="/top/courses/">COURSES</a></li>
                    
                        <li><a href="/top/about/">ABOUT</a></li>
                    

                    
                </ul>
            </div>
        </div>
        
    </div>
    
</nav>
<script>
    
    
    
    var $body   = document.body;
    var $toggle = document.querySelector('.navbar-toggle');
    var $navbar = document.querySelector('#huxblog_navbar');
    var $collapse = document.querySelector('.navbar-collapse');

    $toggle.addEventListener('click', handleMagic)
    function handleMagic(e){
        if ($navbar.className.indexOf('in') > 0) {
        
            $navbar.className = " ";
            
            setTimeout(function(){
                
                if($navbar.className.indexOf('in') < 0) {
                    $collapse.style.height = "0px"
                }
            },400)
        }else{
        
            $collapse.style.height = "auto"
            $navbar.className += " in";
        }
    }
</script>




<style type="text/css">
    header.intro-header {
        background-image: url('/img/backgrounds/tech18.jpg')
    }
</style>
<header class="intro-header">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <div class="tags">
                        
                        <a class="tag" href="/tags/development" title="Development">
                            Development
                        </a>
                        
                        <a class="tag" href="/tags/linux" title="Linux">
                            Linux
                        </a>
                        
                    </div>
                    <h1>TCP Sockets Server</h1>
                    <h2 class="subheading"></h2>
                    <span class="meta">
                        Posted by 
                        
                            Jaime Arrocha
                         
                        on 
                        Wednesday, May 18, 2016
                        
                        
                        
                    </span>
                </div>
            </div>
        </div>
    </div>
</header>




<article>
    <div class="container">
        <div class="row">

            
            <div class="
                col-lg-11 col-lg-offset-1
                col-md-10 col-md-offset-1
                post-container">

                
                <header>
                    <h2>TOC</h2>
                </header>
                <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#intro">Intro</a></li>
        <li><a href="#complete-code">Complete Code</a></li>
      </ul>
    </li>
  </ul>
</nav>
                
                <h2 id="intro">Intro</h2>
<hr>
<p>This post serves as a explanation of the basics of a TCP socket server, which
serves as the base to a future post explaining the basics of a web server.</p>
<p><strong>Note:</strong> the complete code of an older version is fully posted in the end.
Check my github repo for an updated version. <a href="https://github.com/jarrocha/psockets/tree/master/tcp_server">Link</a>.</p>
<p>There are good tutorials out there that explain each of the functions of the
sockets POSIX API in detail so this post will serve mostly to understand the
overall basics.</p>
<p>As we all know, a TCP connection is also know a connection oriented protocol
which handles acknoledgment of bytes when they are received and sent. So it
makes sure that all packets are ordered and complete for each transaction.</p>
<p>How do we start a TCP socket connection? Below is a graph of the transition
between sockets system calls to have a TCP server up and running.</p>
<pre><code>Connection Establishment    ------------
TCP (Stream Sockets)        |          |
Server (Passive Socket)     v          v
socket() --&gt; bind() --&gt; listen() --&gt; accept() --&gt; read()/write() --&gt; close()
                                      ^  |            |   ^
Client (Active Socket)                |  v            v   |
socket() ----&gt; connect() -----------------------&gt; read()/write() --&gt; close()
</code></pre><p>A server starts by creating a socket descriptor, this particular socket is only
used by the server to listen for incoming connections. It then binds a
particular socket descriptor with an IP address and then sets to listen on that
socket and IP address. Then the server sits on the accept function call. When
the server gets a connection request with the accept function call, it creates
another socket descriptor which is used for I/O with the client. When the I/O
with the client is done, the server closes the socket descriptor used for I/O
and uses the listening descriptor once again to listen for a new client.</p>
<p>On the client side is much easier, you create socket descriptor for the server
you are going to connect to and fill int some properties for this particular
host you are after and then call connect(). If the call was successful, your
program is ready for I/O with the server.</p>
<p>Here&rsquo;s a quick summary of the function calls:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#f92672">-</span>socket()<span style="color:#f92672">:</span> creates a new socket. Opens a socket descriptor.
<span style="color:#f92672">-</span>bind()<span style="color:#f92672">:</span> usually used in servers, binds a socket to an existing address.
<span style="color:#f92672">-</span>listen()<span style="color:#f92672">:</span> allows a stream socket to accept incoming connections.
<span style="color:#f92672">-</span>accept()<span style="color:#f92672">:</span> consumes a connection from a peer application on a listening stream socket.
<span style="color:#f92672">-</span>connect()<span style="color:#f92672">:</span> establish a connection with another socket <span style="color:#66d9ef">if</span> server is available.
            If not it waits <span style="color:#66d9ef">for</span> up to a number of pending connections.

<span style="color:#f92672">-</span>calling socket() is similar to calling open. A file descriptor will be 
 obtained which can be used <span style="color:#66d9ef">for</span> I<span style="color:#f92672">/</span>O. When the application is done, the descriptor needs
 to be closed.

 <span style="color:#f92672">-</span>socket I<span style="color:#f92672">/</span>O can be performed using the convetional read() and write() system 
 calls, or using a range of socket<span style="color:#f92672">-</span>specific system calls (e.g., send(), recv(),
 sendto(), and recvfrom()). By <span style="color:#66d9ef">default</span>, these system calls can block. But they
 can be run atomically by using the fcntl() F_SETFL operation to enable the 
 O_NONBLOCK open file status flag.
</code></pre></div><p>So now that we get an idea of what the system calls do, Iâ€™m going to show you
some actual code. This code belongs to a TCP server implementation in my
<!-- raw HTML omitted -->github account<!-- raw HTML omitted -->.
I am going to analyze it in pieces.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#75715e">/* server socket variables */</span>
<span style="color:#66d9ef">int</span> sockfd, new_sockfd;
<span style="color:#66d9ef">struct</span> sockaddr_in host_addr, client_addr;
socklen_t sin_size <span style="color:#f92672">=</span> <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">struct</span> sockaddr_in);
<span style="color:#66d9ef">int</span> recv_length <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, yes <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>;
</code></pre></div><p>This section declares and defines our basic variables for both of server and
clients. <!-- raw HTML omitted -->sockfd<!-- raw HTML omitted --> is used to establish socket connections and <!-- raw HTML omitted -->new_sockfd<!-- raw HTML omitted --> is
used for I/O. <!-- raw HTML omitted -->struct sockaddr_in<!-- raw HTML omitted --> is the structure holding everything regarding
IP addressing for both the server and client in particular for IPv4. The rest of
the variables are mostly to enable options for other socket system calls.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#75715e">/* defining listening socket descriptor */</span>
  <span style="color:#66d9ef">if</span> ((sockfd <span style="color:#f92672">=</span> socket(AF_INET, SOCK_STREAM, <span style="color:#ae81ff">0</span>)) <span style="color:#f92672">==</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>)
      perror(<span style="color:#e6db74">&#34;in socket&#34;</span>);
  <span style="color:#66d9ef">if</span> (setsockopt(sockfd, SOL_SOCKET, SO_REUSEADDR, <span style="color:#f92672">&amp;</span>yes, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">int</span>))
          <span style="color:#f92672">==</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>)
      perror(<span style="color:#e6db74">&#34;setting socket option SO_REUSEADDR&#34;</span>);
</code></pre></div><p>Here we finally create our socket descriptor to accept connections from clients.
And use <!-- raw HTML omitted -->setsockoptions<!-- raw HTML omitted --> to enable some beneficial options for our sockets.
Explaining this options will take us out of scope, but to get an idea, they help
in re-using a previously use address when binding and restarting the tcp server.
You can see that for socket we specify that we are using TCP and IPv4.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#75715e">/* initializing server address socket structure */</span>
  host_addr.sin_family <span style="color:#f92672">=</span> AF_INET;       <span style="color:#75715e">/* host byte order */</span>
  host_addr.sin_port <span style="color:#f92672">=</span> htons(S_PORT); <span style="color:#75715e">/* port, network byte order */</span>
  host_addr.sin_addr.s_addr <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;     <span style="color:#75715e">/* use host address */</span>
</code></pre></div><p>This piece fills some values for our server address structure. We are specifying
the use of IPv4 and port number to use. See that we are not specifying an IP
address. We are telling the kernel to automatically fill it with the current
address of our active interface.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#75715e">/* bind socket to IP address */</span>
  <span style="color:#66d9ef">if</span> (bind(sockfd, (<span style="color:#66d9ef">struct</span> sockaddr <span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>host_addr, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">struct</span> sockaddr))
          <span style="color:#f92672">==</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>)
      perror(<span style="color:#e6db74">&#34;binding to socket&#34;</span>);
</code></pre></div><p>After we specify our address structure and socket descriptor we bind the socket
descriptor to the current IP on the given port.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#75715e">/* listen on socket */</span>
  <span style="color:#66d9ef">if</span> (listen(sockfd, <span style="color:#ae81ff">5</span>) <span style="color:#f92672">==</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>)
      perror(<span style="color:#e6db74">&#34;listening on socket&#34;</span>);
</code></pre></div><p>The call to <!-- raw HTML omitted -->listen()<!-- raw HTML omitted --> opens the socket to accept incoming connections up to a
maximum of 5 pending connections. All connections are sent into a queue until a
call to <!-- raw HTML omitted -->accept()<!-- raw HTML omitted --> consumes a connection.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c">new_sockfd <span style="color:#f92672">=</span> accept(sockfd, (<span style="color:#66d9ef">struct</span> sockaddr <span style="color:#f92672">*</span>) <span style="color:#f92672">&amp;</span>client_addr,
               <span style="color:#f92672">&amp;</span>sin_size);
</code></pre></div><p>This last piece accepts an incoming connection returning a new socket
descriptor. This is the descriptor that needs to be use for the read()/write()
system calls. These are the ones that handle back and forth communication between
client and server.</p>
<p>All the piece of code presented so far is the basic structure of implementing an
TCP server. After this, pretty much anything can be done. A web server
is a good idea. It teaches how to go from RFC details to an actual working
program. It is just amazing to see when you get your own web page and server
handling requests from a web browser. Other examples are a proxy server, network
scanners, and sniffers.</p>
<p>Check the code, edit, and improve on it. Let me know if you have any question in
the comments section.</p>
<h2 id="complete-code">Complete Code</h2>
<hr>
<p>Here is the complete code. The <code>dump()</code> function was taken from
<a href="http://www.amazon.com/Hacking-Art-Exploitation-Jon-Erickson/dp/1593271441/ref=sr_1_1?s=books&amp;ie=UTF8&amp;qid=1454054525&amp;sr=1-1&amp;keywords=jon+erickson">Jon Erickson&rsquo;s book</a></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-C" data-lang="C">
<span style="color:#75715e">/*
</span><span style="color:#75715e"> * A simple server to demonstrate TCP sockets implementation. The server
</span><span style="color:#75715e"> * takes input from server and shows dump of the data.
</span><span style="color:#75715e"> */</span>

<span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;stdio.h&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;stdlib.h&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;string.h&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;unistd.h&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;sys/socket.h&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;netinet/in.h&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;arpa/inet.h&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span>
<span style="color:#75715e">#define DATA 50
</span><span style="color:#75715e">#define S_PORT 7890
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">void</span> <span style="color:#a6e22e">dump</span>(<span style="color:#66d9ef">char</span> <span style="color:#f92672">*</span>, <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">int</span>);

<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>(<span style="color:#66d9ef">void</span>)
{
  <span style="color:#75715e">/* server socket variables */</span>
  <span style="color:#66d9ef">int</span> sockfd, new_sockfd;
  <span style="color:#66d9ef">struct</span> sockaddr_in host_addr, client_addr;
  socklen_t sin_size <span style="color:#f92672">=</span> <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">struct</span> sockaddr_in);
  <span style="color:#66d9ef">int</span> recv_length <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, yes <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>;
  
  <span style="color:#75715e">/* data holding */</span>
  <span style="color:#66d9ef">char</span> buffer[<span style="color:#ae81ff">1024</span>];

  <span style="color:#75715e">/* defining listening socket descriptor */</span>
  <span style="color:#66d9ef">if</span> ((sockfd <span style="color:#f92672">=</span> socket(AF_INET, SOCK_STREAM, <span style="color:#ae81ff">0</span>)) <span style="color:#f92672">==</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>)
      perror(<span style="color:#e6db74">&#34;in socket&#34;</span>);
  <span style="color:#66d9ef">if</span> (setsockopt(sockfd, SOL_SOCKET, SO_REUSEADDR, <span style="color:#f92672">&amp;</span>yes, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">int</span>))
          <span style="color:#f92672">==</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>)
      perror(<span style="color:#e6db74">&#34;setting socket option SO_REUSEADDR&#34;</span>);
  
  <span style="color:#75715e">/* initializing server address socket structure */</span>
  host_addr.sin_family <span style="color:#f92672">=</span> AF_INET;       <span style="color:#75715e">/* host byte order */</span>
  host_addr.sin_port <span style="color:#f92672">=</span> htons(S_PORT); <span style="color:#75715e">/* port, network byte order */</span>
  host_addr.sin_addr.s_addr <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;     <span style="color:#75715e">/* use host address */</span>

  <span style="color:#75715e">/* zero the rest of struct */</span>
  memset(<span style="color:#f92672">&amp;</span>(host_addr.sin_zero), <span style="color:#e6db74">&#39;\0&#39;</span>, <span style="color:#66d9ef">sizeof</span>(host_addr.sin_zero));

  <span style="color:#75715e">/* bind socket to IP address */</span>
  <span style="color:#66d9ef">if</span> (bind(sockfd, (<span style="color:#66d9ef">struct</span> sockaddr <span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>host_addr, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">struct</span> sockaddr))
          <span style="color:#f92672">==</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>)
      perror(<span style="color:#e6db74">&#34;binding to socket&#34;</span>);
  
  <span style="color:#75715e">/* listen on socket */</span>
  <span style="color:#66d9ef">if</span> (listen(sockfd, <span style="color:#ae81ff">5</span>) <span style="color:#f92672">==</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>)
      perror(<span style="color:#e6db74">&#34;listening on socket&#34;</span>);
  
  <span style="color:#75715e">/* main procedure */</span>
  <span style="color:#66d9ef">while</span> (<span style="color:#ae81ff">1</span>) {
      new_sockfd <span style="color:#f92672">=</span> accept(sockfd, (<span style="color:#66d9ef">struct</span> sockaddr <span style="color:#f92672">*</span>) <span style="color:#f92672">&amp;</span>client_addr,
               <span style="color:#f92672">&amp;</span>sin_size);
      <span style="color:#66d9ef">if</span> (new_sockfd <span style="color:#f92672">==</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>)
          perror(<span style="color:#e6db74">&#34;accepting connection&#34;</span>);
      printf(<span style="color:#e6db74">&#34;server: got connection from %s port %d</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>,
          inet_ntoa(client_addr.sin_addr),
          ntohs(client_addr.sin_port));
      recv_length <span style="color:#f92672">=</span> recv(new_sockfd, <span style="color:#f92672">&amp;</span>buffer, DATA, <span style="color:#ae81ff">0</span>);

      <span style="color:#66d9ef">while</span> (recv_length <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>) {
          printf(<span style="color:#e6db74">&#34;RECV: %d bytes</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>, recv_length);
          dump(buffer, recv_length);
          recv_length <span style="color:#f92672">=</span> recv(new_sockfd, <span style="color:#f92672">&amp;</span>buffer, DATA, <span style="color:#ae81ff">0</span>);
      }
  
      close(new_sockfd);
  }
  <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
}

<span style="color:#75715e">/* dumps raw memory in hex byte and printable split format */</span>
<span style="color:#66d9ef">void</span> <span style="color:#a6e22e">dump</span>(<span style="color:#66d9ef">char</span> <span style="color:#f92672">*</span>data_buffer, <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">int</span> length)
{
  <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">char</span> byte;
  <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">int</span> i, j;
  
  <span style="color:#66d9ef">for</span> (i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; i <span style="color:#f92672">&lt;</span> length; i<span style="color:#f92672">++</span>) {
      byte <span style="color:#f92672">=</span> data_buffer[i];
      printf(<span style="color:#e6db74">&#34;%02x &#34;</span>, data_buffer[i]);  <span style="color:#75715e">/* displays byte in hex */</span>
      
      <span style="color:#66d9ef">if</span> (((i <span style="color:#f92672">%</span> <span style="color:#ae81ff">16</span>) <span style="color:#f92672">==</span> <span style="color:#ae81ff">15</span>) <span style="color:#f92672">||</span> (i <span style="color:#f92672">==</span> length <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>)) {
          <span style="color:#66d9ef">for</span> (j <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; j <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">15</span> <span style="color:#f92672">-</span> (i <span style="color:#f92672">%</span> <span style="color:#ae81ff">16</span>); j<span style="color:#f92672">++</span>)
              printf(<span style="color:#e6db74">&#34;   &#34;</span>);
          printf(<span style="color:#e6db74">&#34;| &#34;</span>);
          <span style="color:#75715e">/* display printable bytes from line */</span>
          <span style="color:#66d9ef">for</span> (j <span style="color:#f92672">=</span> (i <span style="color:#f92672">-</span> (i <span style="color:#f92672">%</span> <span style="color:#ae81ff">16</span>)); j <span style="color:#f92672">&lt;=</span> i; j<span style="color:#f92672">++</span>) {
              byte <span style="color:#f92672">=</span> data_buffer[j];
              <span style="color:#75715e">/* outside printable char range */</span>
              <span style="color:#66d9ef">if</span> ((byte <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">31</span>) <span style="color:#f92672">&amp;&amp;</span> (byte <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">127</span>))
                  printf(<span style="color:#e6db74">&#34;%c&#34;</span>, byte);
              <span style="color:#66d9ef">else</span>
                  printf(<span style="color:#e6db74">&#34;.&#34;</span>);
          }
          <span style="color:#75715e">/* end of the dump line (each line 16 bytes) */</span>
          printf(<span style="color:#e6db74">&#34;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>);
      }
  }
}
</code></pre></div>

                

                <hr>
                <ul class="pager">
                    
                    <li class="previous">
                        <a href="/post/2018-11-18-ovs-kvm/" data-toggle="tooltip" data-placement="top" title="Installing and Configuring OpenvSwitch With QEMU-KVM">&larr;
                            Previous Post</a>
                    </li>
                    
                    
                    <li class="next">
                        <a href="/post/2018-11-18-performance-analysis-ii/" data-toggle="tooltip" data-placement="top" title="Code Performance Analysis With Assembly &amp; C: Part 2">Next
                            Post &rarr;</a>
                    </li>
                    
                </ul>

                
<div id="disqus-comment"></div>



            </div>
            
            <div class="
                col-lg-11 col-lg-offset-1
                col-md-10 col-md-offset-1
                sidebar-container">

                
                
                <section>
                    <hr class="hidden-sm hidden-xs">
                    <h5><a href="/tags/">FEATURED TAGS</a></h5>
                    <div class="tags">
                        
                        
                        
                        
                        
                        <a href="/tags/bash" title="bash">
                            bash
                        </a>
                        
                        
                        
                        <a href="/tags/c" title="c">
                            c
                        </a>
                        
                        
                        
                        <a href="/tags/control-theory" title="control-theory">
                            control-theory
                        </a>
                        
                        
                        
                        <a href="/tags/development" title="development">
                            development
                        </a>
                        
                        
                        
                        
                        
                        <a href="/tags/dynamic-systems" title="dynamic-systems">
                            dynamic-systems
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/kvm" title="kvm">
                            kvm
                        </a>
                        
                        
                        
                        <a href="/tags/linux" title="linux">
                            linux
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/opencv" title="opencv">
                            opencv
                        </a>
                        
                        
                        
                        
                        
                        <a href="/tags/python" title="python">
                            python
                        </a>
                        
                        
                        
                        <a href="/tags/qemu" title="qemu">
                            qemu
                        </a>
                        
                        
                        
                        <a href="/tags/quadrotor" title="quadrotor">
                            quadrotor
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/tcp/ip" title="tcp/ip">
                            tcp/ip
                        </a>
                        
                        
                        
                        <a href="/tags/x86-assembly" title="x86-assembly">
                            x86-assembly
                        </a>
                        
                        
                        
                        
                    </div>
                </section>
                

                
                
            </div>
        </div>
    </div>
</article>




<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                   
                    
                    <li>
                        <a href="mailto:jarrocha@linux.com">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-envelope fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
		    
                    
                    
                    
                    

                    

		    
                    
                    
                    <li>
                        <a target="_blank" href="https://github.com/jarrocha">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
		    
                    
                    <li>
                        <a target="_blank" href="https://gitlab.com/jarrocha27">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-gitlab fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
            
                    
                    
                    <li>
                        <a target="_blank" href="https://www.linkedin.com/in/jaime-arrocha-337b0488/">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
		    
                    
                    
                    <li>
                        <a target="_blank" href="https://stackoverflow.com/users/3848072/jarr">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-stack-overflow fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
            
                    
                    
                    
            
            
            
                </ul>
		<p class="copyright text-muted">
                    Copyright &copy; Innercoder.dev 2022
                    <br>
                    <a href="https://themes.gohugo.io/hugo-theme-cleanwhite">CleanWhite Hugo Theme</a> by <a href="https://zhaohuabing.com">Huabing</a> |
                    <iframe
                        style="margin-left: 2px; margin-bottom:-5px;"
                        frameborder="0" scrolling="0" width="100px" height="20px"
                        src="https://ghbtns.com/github-btn.html?user=zhaohuabing&repo=hugo-theme-cleanwhite&type=star&count=true" >
                    </iframe>
                </p>
            </div>
        </div>
    </div>
</footer>




<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>






<script>
    
    if($('#tag_cloud').length !== 0){
        async("/js/jquery.tagcloud.js",function(){
            $.fn.tagcloud.defaults = {
                
                color: {start: '#bbbbee', end: '#0085a1'},
            };
            $('#tag_cloud a').tagcloud();
        })
    }
</script>


<script>
    async("https://cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.js", function(){
        var $nav = document.querySelector("nav");
        if($nav) FastClick.attach($nav);
    })
</script>






</body>
</html>
